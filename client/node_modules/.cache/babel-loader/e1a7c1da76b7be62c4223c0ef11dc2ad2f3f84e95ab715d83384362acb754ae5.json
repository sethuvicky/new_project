{"ast":null,"code":"import { ALL_TODO_REQUEST, ALL_TODO_SUCCESS, ALL_TODO_FAIL, TODO_EDIT_FAIL, TODO_EDIT_REQUEST, TODO_EDIT_SUCCESS, TODO_DELETE_FAIL, TODO_DELETE_REQUEST, TODO_DELETE_SUCCESS } from \"../constants/AllTodo\";\nimport { ApolloClient, InMemoryCache, ApolloProvider, gql } from '@apollo/client';\nexport const getTodo = () => async dispatch => {\n  const userid = localStorage.getItem(\"userid\");\n  const client = new ApolloClient({\n    uri: 'http://localhost:3004/graphql',\n    cache: new InMemoryCache()\n  });\n  try {\n    dispatch({\n      type: ALL_TODO_REQUEST\n    });\n    const {\n      data\n    } = await client.query({\n      query: gql`\n          query{\n            getAllTodos(USERId:${userid}) {\n              id\n              title,\n              USERId\n            }\n          }\n          `\n    });\n    console.log(data);\n    dispatch({\n      type: ALL_TODO_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: ALL_TODO_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\nexport const EditTodo = (edit, editInput) => async dispatch => {\n  console.log(edit, editInput);\n  const client = new ApolloClient({\n    uri: 'http://localhost:3004/graphql',\n    cache: new InMemoryCache()\n  });\n  try {\n    dispatch({\n      type: TODO_EDIT_REQUEST\n    });\n    const {\n      data\n    } = await client.mutate({\n      mutation: gql`\n            mutation{\n              updateTodo(id:${edit},title:\"${editInput}\") {\n                id\n              }\n            }\n            `\n    });\n    console.log(data);\n    dispatch({\n      type: TODO_EDIT_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: TODO_EDIT_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\nexport const DeleteTodo = id => async dispatch => {\n  // const [deleteTodo, { error }] = useMutation(DELETE_USER_MUTATION);\n\n  const client = new ApolloClient({\n    uri: 'http://localhost:3004/graphql',\n    cache: new InMemoryCache()\n  });\n  try {\n    dispatch({\n      type: TODO_DELETE_REQUEST\n    });\n    const {\n      data\n    } = await client.mutate({\n      mutation: gql`\n          mutation{\n            deleteTodo(id:${id})\n          }\n          `\n    });\n    dispatch({\n      type: TODO_DELETE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: TODO_EDIT_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};","map":{"version":3,"names":["ALL_TODO_REQUEST","ALL_TODO_SUCCESS","ALL_TODO_FAIL","TODO_EDIT_FAIL","TODO_EDIT_REQUEST","TODO_EDIT_SUCCESS","TODO_DELETE_FAIL","TODO_DELETE_REQUEST","TODO_DELETE_SUCCESS","ApolloClient","InMemoryCache","ApolloProvider","gql","getTodo","dispatch","userid","localStorage","getItem","client","uri","cache","type","data","query","console","log","payload","error","response","message","EditTodo","edit","editInput","mutate","mutation","DeleteTodo","id"],"sources":["/home/radicalstart/Desktop/New Folder/client/src/actions/allProductsAction.js"],"sourcesContent":["\nimport { ALL_TODO_REQUEST,\n    ALL_TODO_SUCCESS,\n    ALL_TODO_FAIL,TODO_EDIT_FAIL,TODO_EDIT_REQUEST,\n    TODO_EDIT_SUCCESS,TODO_DELETE_FAIL,TODO_DELETE_REQUEST,TODO_DELETE_SUCCESS } from \"../constants/AllTodo\";\nimport { ApolloClient, InMemoryCache, ApolloProvider, gql } from '@apollo/client';\n\nexport const getTodo= () => async (dispatch)=>{\n\n  const userid = localStorage.getItem(\"userid\")\n    const client = new ApolloClient({\n        uri: 'http://localhost:3004/graphql',\n        cache: new InMemoryCache(),\n      });\n    try {\n        dispatch({\n            type: ALL_TODO_REQUEST\n        });\n  \n     \n        const {data} = await client\n        .query({\n          query: gql`\n          query{\n            getAllTodos(USERId:${userid}) {\n              id\n              title,\n              USERId\n            }\n          }\n          `,\n        })\n        console.log(data)\n     \n        dispatch({\n            type:ALL_TODO_SUCCESS,\n            payload: data,\n        })\n    } catch (error) {\n        dispatch({\n            type:ALL_TODO_FAIL,\n            payload: error.response.data.message,\n        })\n    }\n  }; \n\n\n  export const EditTodo= (edit,editInput) => async (dispatch)=>{\n    console.log(edit,editInput)\n    const client = new ApolloClient({\n        uri: 'http://localhost:3004/graphql',\n        cache: new InMemoryCache(),\n      });\n    try {\n        dispatch({\n            type: TODO_EDIT_REQUEST\n        });\n  \n     \n        const {data} = await client\n        .mutate({\n            mutation: gql`\n            mutation{\n              updateTodo(id:${edit},title:\"${editInput}\") {\n                id\n              }\n            }\n            `,\n          })\n          console.log(data)\n     \n        dispatch({\n            type:TODO_EDIT_SUCCESS,\n            payload: data,\n        })\n    } catch (error) {\n        dispatch({\n            type:TODO_EDIT_FAIL,\n            payload: error.response.data.message,\n        })\n    }\n  }; \n  export const DeleteTodo= (id) => async (dispatch)=>{\n\n    // const [deleteTodo, { error }] = useMutation(DELETE_USER_MUTATION);\n\n    const client = new ApolloClient({\n        uri: 'http://localhost:3004/graphql',\n        cache: new InMemoryCache(),\n      });\n    try {\n        dispatch({\n            type: TODO_DELETE_REQUEST\n        });\n  \n     \n        const {data} = await client\n        .mutate({\n          mutation: gql`\n          mutation{\n            deleteTodo(id:${id})\n          }\n          `,\n        })\n     \n     \n        dispatch({\n            type:TODO_DELETE_SUCCESS,\n            payload: data,\n        })\n    } catch (error) {\n        dispatch({\n            type:TODO_EDIT_FAIL,\n            payload: error.response.data.message,\n        })\n    }\n  }; \n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}